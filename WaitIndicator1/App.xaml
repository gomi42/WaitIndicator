<Application x:Class="WaitIndicator1.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:s="clr-namespace:WaitIndicator1"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <!--
            credit of this xaml goes to an unknown author on stackoverflow
            modified to use a single ColorAnimation instead of multiple keyframes
        -->

        <Color x:Key="FilledColor">#FF9B9B9B</Color>
        <Color x:Key="UnfilledColor">#009B9B9B</Color>

        <Style TargetType="s:WaitIndicator">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="s:WaitIndicator">
                        <ControlTemplate.Resources>
                            <Storyboard x:Key="Animation0"
                                        BeginTime="00:00:00.0"
                                        RepeatBehavior="Forever">
                                <ColorAnimation Storyboard.TargetName="Part_Shape0"
                                                Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)"
                                                From="{StaticResource FilledColor}"
                                                To="{StaticResource UnfilledColor}"
                                                Duration="0:0:1.6" />
                            </Storyboard>

                            <Storyboard x:Key="Animation1"
                                        BeginTime="00:00:00.2"
                                        RepeatBehavior="Forever">
                                <ColorAnimation Storyboard.TargetName="Part_Shape1"
                                                Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)"
                                                From="{StaticResource FilledColor}"
                                                To="{StaticResource UnfilledColor}"
                                                Duration="0:0:1.6" />
                            </Storyboard>

                            <Storyboard x:Key="Animation2"
                                        BeginTime="00:00:00.4"
                                        RepeatBehavior="Forever">
                                <ColorAnimation Storyboard.TargetName="Part_Shape2"
                                                Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)"
                                                From="{StaticResource FilledColor}"
                                                To="{StaticResource UnfilledColor}"
                                                Duration="0:0:1.6" />
                            </Storyboard>

                            <Storyboard x:Key="Animation3"
                                        BeginTime="00:00:00.6"
                                        RepeatBehavior="Forever">
                                <ColorAnimation Storyboard.TargetName="Part_Shape3"
                                                Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)"
                                                From="{StaticResource FilledColor}"
                                                To="{StaticResource UnfilledColor}"
                                                Duration="0:0:1.6" />
                            </Storyboard>

                            <Storyboard x:Key="Animation4"
                                        BeginTime="00:00:00.8"
                                        RepeatBehavior="Forever">
                                <ColorAnimation Storyboard.TargetName="Part_Shape4"
                                                Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)"
                                                From="{StaticResource FilledColor}"
                                                To="{StaticResource UnfilledColor}"
                                                Duration="0:0:1.6" />
                            </Storyboard>

                            <Storyboard x:Key="Animation5"
                                        BeginTime="00:00:01.0"
                                        RepeatBehavior="Forever">
                                <ColorAnimation Storyboard.TargetName="Part_Shape5"
                                                Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)"
                                                From="{StaticResource FilledColor}"
                                                To="{StaticResource UnfilledColor}"
                                                Duration="0:0:1.6" />
                            </Storyboard>

                            <Storyboard x:Key="Animation6"
                                        BeginTime="00:00:01.2"
                                        RepeatBehavior="Forever">
                                <ColorAnimation Storyboard.TargetName="Part_Shape6"
                                                Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)"
                                                From="{StaticResource FilledColor}"
                                                To="{StaticResource UnfilledColor}"
                                                Duration="0:0:1.6" />
                            </Storyboard>

                            <Storyboard x:Key="Animation7"
                                        BeginTime="00:00:01.4"
                                        RepeatBehavior="Forever">
                                <ColorAnimation Storyboard.TargetName="Part_Shape7"
                                                Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)"
                                                From="{StaticResource FilledColor}"
                                                To="{StaticResource UnfilledColor}"
                                                Duration="0:0:1.6" />
                            </Storyboard>
                        </ControlTemplate.Resources>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsVisible" Value="True">
                                <Trigger.EnterActions>
                                    <BeginStoryboard x:Name="Storyboard0"
                                                     Storyboard="{StaticResource Animation0}" />
                                    <BeginStoryboard x:Name="Storyboard1"
                                                     Storyboard="{StaticResource Animation1}" />
                                    <BeginStoryboard x:Name="Storyboard2"
                                                     Storyboard="{StaticResource Animation2}" />
                                    <BeginStoryboard x:Name="Storyboard3"
                                                     Storyboard="{StaticResource Animation3}" />
                                    <BeginStoryboard x:Name="Storyboard4"
                                                     Storyboard="{StaticResource Animation4}" />
                                    <BeginStoryboard x:Name="Storyboard5"
                                                     Storyboard="{StaticResource Animation5}" />
                                    <BeginStoryboard x:Name="Storyboard6"
                                                     Storyboard="{StaticResource Animation6}" />
                                    <BeginStoryboard x:Name="Storyboard7"
                                                     Storyboard="{StaticResource Animation7}" />
                                </Trigger.EnterActions>

                                <Trigger.ExitActions>
                                    <StopStoryboard BeginStoryboardName="Storyboard0" />
                                    <StopStoryboard BeginStoryboardName="Storyboard1" />
                                    <StopStoryboard BeginStoryboardName="Storyboard2" />
                                    <StopStoryboard BeginStoryboardName="Storyboard3" />
                                    <StopStoryboard BeginStoryboardName="Storyboard4" />
                                    <StopStoryboard BeginStoryboardName="Storyboard5" />
                                    <StopStoryboard BeginStoryboardName="Storyboard6" />
                                    <StopStoryboard BeginStoryboardName="Storyboard7" />
                                </Trigger.ExitActions>
                            </Trigger>
                        </ControlTemplate.Triggers>

                        <Canvas>
                            <Canvas.Resources>
                                <Style TargetType="Ellipse">
                                    <Setter Property="Fill" Value="#009B9B9B" />
                                </Style>
                            </Canvas.Resources>

                            <Ellipse x:Name="Part_Shape0" />
                            <Ellipse x:Name="Part_Shape1" />
                            <Ellipse x:Name="Part_Shape2" />
                            <Ellipse x:Name="Part_Shape3" />
                            <Ellipse x:Name="Part_Shape4" />
                            <Ellipse x:Name="Part_Shape5" />
                            <Ellipse x:Name="Part_Shape6" />
                            <!--<Ellipse x:Name="Part_Shape7" />-->
                            <Path x:Name="Part_Shape7" Fill="#009B9B9B" Data="M0,0 L 10,0 L8.5,10 L1.5,10 z" Stretch="Uniform"/>
                        </Canvas>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Application.Resources>
</Application>
